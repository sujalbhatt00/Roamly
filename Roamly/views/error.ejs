// filepath: c:\Users\sujal\Desktop\Roamly\routes\admin.js
const express = require("express");
const router = express.Router();
const wrapAsync = require("../utils/wrapAsync");
const { isLoggedIn, isAdmin } = require("../middleware"); // Ensure user is logged in and is an admin
const adminController = require("../controller/admin");

// Admin Dashboard
router.get("/", isLoggedIn, isAdmin, wrapAsync(adminController.dashboard));

// Manage Listings
router.get("/listings", isLoggedIn, isAdmin, wrapAsync(adminController.listListings));
router.delete("/listings/:id", isLoggedIn, isAdmin, wrapAsync(adminController.deleteListing));

// Manage Users
router.get("/users", isLoggedIn, isAdmin, wrapAsync(adminController.listUsers));
router.delete("/users/:id", isLoggedIn, isAdmin, wrapAsync(adminController.deleteUser));

// Manage Bookings
router.get("/bookings", isLoggedIn, isAdmin, wrapAsync(adminController.listBookings));
router.delete("/bookings/:id", isLoggedIn, isAdmin, wrapAsync(adminController.deleteBooking));

module.exports = router;