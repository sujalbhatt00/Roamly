<% layout("layouts/boilerplate") %>

<!-- Modern Glassmorphism Admin Dashboard (Neumorphism + Frosted Glass) -->
<style>
  :root{
    --bg:#0f172a; /* fallback */
    --glass-1: rgba(255,255,255,0.06);
    --glass-2: rgba(255,255,255,0.04);
    --accent:#E54D42; /* roamly-red */
    --accent-2:#3b82f6;
    --muted: rgba(255,255,255,0.7);
    --card-radius: 14px;
    --shadow: 0 10px 30px rgba(2,6,23,0.6);
    --glass-border: rgba(255,255,255,0.08);
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  }

  /* Page background: subtle gradient */
  body, .admin-dashboard-body { 
    background: linear-gradient(180deg, rgba(8,10,20,1) 0%, rgba(11,14,28,1) 100%);
    color: white;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  }

  .admin-dashboard-body{
    min-height:100vh;
    padding:1.25rem;
    box-sizing:border-box;
  }

  .container{
    max-width:1200px;
    margin:0 auto;
    display:grid;
    grid-template-columns: 260px 1fr;
    gap:1.25rem;
    align-items:start;
  }

  /* SIDEBAR */
  .sidebar{
    background: linear-gradient(180deg, var(--glass-1), var(--glass-2));
    border: 1px solid var(--glass-border);
    border-radius: var(--card-radius);
    padding:1rem;
    backdrop-filter: blur(8px) saturate(120%);
    box-shadow: var(--shadow);
    height: calc(100vh - 2.5rem);
    position:sticky; top:1.25rem;
    display:flex; flex-direction:column; gap:1rem;
  }

  .brand{
    display:flex; gap:0.75rem; align-items:center; padding-bottom:0.5rem; border-bottom:1px solid rgba(255,255,255,0.03);
  }
  .brand-logo{ width:40px; height:40px; border-radius:10px; background:linear-gradient(135deg,var(--accent),var(--accent-2)); display:flex; align-items:center; justify-content:center; font-weight:700; }
  .brand h3{ margin:0; font-size:1.05rem; letter-spacing:0.2px; }
  .nav{ display:flex; flex-direction:column; gap:0.25rem; margin-top:0.5rem; }
  .nav a{ display:flex; gap:0.75rem; align-items:center; padding:0.6rem; border-radius:10px; color:var(--muted); text-decoration:none; font-weight:600; }
  .nav a svg{ opacity:0.9 }
  .nav a:hover, .nav a.active{ background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); color: white; }

  /* Main column */
  .main{
    display:flex; flex-direction:column; gap:1.25rem;
  }

  .topbar{ display:flex; justify-content:space-between; align-items:center; gap:1rem; }
  .page-title{ font-size:1.5rem; font-weight:700; }
  .top-actions{ display:flex; gap:0.5rem; align-items:center; }
  .btn{ background:transparent; padding:0.5rem 0.75rem; border-radius:10px; border:1px solid rgba(255,255,255,0.06); color:var(--muted); font-weight:600; cursor:pointer }
  .btn.primary{ background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:white; border:none; box-shadow: 0 6px 18px rgba(227,77,66,0.12) }

  /* Stats grid with frosted cards */
  .stats-grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:1rem; }
  .card{
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
    border-radius:var(--card-radius);
    padding:1rem;
    border:1px solid var(--glass-border);
    backdrop-filter: blur(6px) saturate(120%);
    box-shadow: 0 8px 30px rgba(2,6,23,0.6);
    display:flex; gap:0.75rem; align-items:center; justify-content:space-between;
  }
  .card .meta{ display:flex; gap:0.75rem; align-items:center }
  .card .icon{ width:56px; height:56px; border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:1.25rem; }
  .card .k{ color:var(--muted); font-weight:600 }
  .card .v{ font-size:1.35rem; font-weight:700 }

  /* Management grid */
  .management-grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:1rem }
  .management-card{ padding:1rem; border-radius:12px; text-align:left; color:var(--muted); background:transparent; border:1px solid rgba(255,255,255,0.03); transition:transform .2s ease, box-shadow .2s ease; }
  .management-card:hover{ transform:translateY(-6px); box-shadow: 0 20px 40px rgba(2,6,23,0.6); color:white }
  .management-card .title{ font-weight:700; margin-bottom:0.25rem }
  .management-card .subtitle{ font-size:0.9rem }

  /* Responsive */
  @media (max-width: 1024px){
    .container{ grid-template-columns: 220px 1fr }
    .stats-grid{ grid-template-columns: repeat(2,1fr) }
    .management-grid{ grid-template-columns: repeat(2,1fr) }
  }
  @media (max-width: 720px){
    .container{ grid-template-columns: 1fr; }
    .sidebar{ position:relative; height:auto; }
    .stats-grid, .management-grid{ grid-template-columns: 1fr }
    .brand h3{ display:none }
    .topbar{ flex-direction:column; align-items:flex-start; gap:0.75rem }
    .nav{ flex-direction:row; overflow:auto }
    .nav a{ white-space:nowrap }
  }

  /* small helper */
  .muted{ color:var(--muted); font-weight:600 }
</style>

<div class="admin-dashboard-body">
  <div class="container">

    <!-- Sidebar -->
    <aside class="sidebar" aria-label="Admin navigation">
      <div class="brand">
        <div class="brand-logo">R</div>
        <div>
          <h3>Roamly Admin</h3>
          <div style="font-size:0.8rem; color:rgba(255,255,255,0.6)">Dashboard</div>
        </div>
      </div>

      <nav class="nav" role="navigation">
        <a href="/admin" class="active" aria-current="page">
          <!-- Home SVG -->
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3 10.5L12 3l9 7.5"/><path stroke-linecap="round" stroke-linejoin="round" d="M9 21V12h6v9"/></svg>
          Overview
        </a>
        <a href="/admin/users">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20v-2a4 4 0 00-4-4H7a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Users
        </a>
        <a href="/admin/listings">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 7.5h18v11.25a1.5 1.5 0 01-1.5 1.5H4.5A1.5 1.5 0 013 18.75V7.5z" stroke-linecap="round" stroke-linejoin="round"/><path d="M7.5 7.5V4.5h9v3" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Listings
        </a>
        <a href="/admin/bookings">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="6" width="18" height="15" rx="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M16 2v4M8 2v4" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Bookings
        </a>

      </nav>

      <div style="margin-top:auto; display:flex; gap:0.5rem; align-items:center;">
        <button class="btn" onclick="location.href='/admin/settings'">Settings</button>
        <button class="btn" onclick="location.href='/'">Go to site</button>
      </div>

    </aside>

    <!-- Main content -->
    <main class="main">

      <div class="topbar">
        <div>
          <div class="page-title">Admin Dashboard</div>
          <div style="color:rgba(255,255,255,0.6); margin-top:6px;">Welcome back â€” here's a quick summary of activity.</div>
        </div>

        <div class="top-actions">
          <button class="btn">Reports</button>
          <button class="btn">Export</button>
          <button class="btn primary" onclick="location.href='/admin/new'">Create Listing</button>
        </div>
      </div>

      <!-- Stats -->
      <section class="stats-grid" aria-label="Key stats">

        <div class="card">
          <div class="meta">
            <div class="icon" style="background:linear-gradient(135deg,var(--accent), rgba(229,77,66,0.12));">
              <!-- users icon -->
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5"><path d="M17 21v-2a4 4 0 00-4-4H7a4 4 0 00-4 4v2"/></svg>
            </div>
            <div>
              <div class="k">Total Users</div>
              <div class="v"><%= userCount %></div>
            </div>
          </div>
          <div class="muted">Active</div>
        </div>

        <div class="card">
          <div class="meta">
            <div class="icon" style="background:linear-gradient(135deg,var(--accent-2), rgba(59,130,246,0.12));">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5"><path d="M3 7.5h18v11.25A1.5 1.5 0 0119.5 20.25H4.5A1.5 1.5 0 013 18.75V7.5z"/></svg>
            </div>
            <div>
              <div class="k">Total Listings</div>
              <div class="v"><%= listingCount %></div>
            </div>
          </div>
          <div class="muted">Published</div>
        </div>

        <div class="card">
          <div class="meta">
            <div class="icon" style="background:linear-gradient(135deg,#22c55e, rgba(34,197,94,0.12));">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5"><path d="M3 8.25h18M7.5 3v3.75M16.5 3v3.75"/></svg>
            </div>
            <div>
              <div class="k">Total Bookings</div>
              <div class="v"><%= bookingCount %></div>
            </div>
          </div>
          <div class="muted">This month</div>
        </div>

      </section>

      <!-- Management tools -->
      <h2 style="margin:0; font-size:1.125rem; font-weight:700;">Management Tools</h2>

      <section class="management-grid" aria-label="Management links">

        <a href="/admin/users" class="management-card" role="button">
          <div style="display:flex; align-items:center; gap:0.75rem">
            <div style="width:44px; height:44px; border-radius:10px; background:linear-gradient(135deg,var(--accent), rgba(229,77,66,0.12)); display:flex; align-items:center; justify-content:center">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5"><path d="M17 21v-2a4 4 0 00-4-4H7a4 4 0 00-4 4v2"/></svg>
            </div>
            <div>
              <div class="title">Manage Users</div>
              <div class="subtitle">View, edit, or delete users</div>
            </div>
          </div>
        </a>

        <a href="/admin/listings" class="management-card">
          <div style="display:flex; align-items:center; gap:0.75rem">
            <div style="width:44px; height:44px; border-radius:10px; background:linear-gradient(135deg,var(--accent-2), rgba(59,130,246,0.12)); display:flex; align-items:center; justify-content:center">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5"><path d="M3 7.5h18v11.25A1.5 1.5 0 0119.5 20.25H4.5A1.5 1.5 0 013 18.75V7.5z"/></svg>
            </div>
            <div>
              <div class="title">Manage Listings</div>
              <div class="subtitle">Approve, feature, or remove listings</div>
            </div>
          </div>
        </a>

        <a href="/admin/bookings" class="management-card">
          <div style="display:flex; align-items:center; gap:0.75rem">
            <div style="width:44px; height:44px; border-radius:10px; background:linear-gradient(135deg,#22c55e, rgba(34,197,94,0.12)); display:flex; align-items:center; justify-content:center">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5"><path d="M3 8.25h18M7.5 3v3.75M16.5 3v3.75"/></svg>
            </div>
            <div>
              <div class="title">Manage Bookings</div>
              <div class="subtitle">Oversee, confirm, or cancel bookings</div>
            </div>
          </div>
        </a>

      </section>

    </main>
  </div>
</div>

<script>
  // small enhancements: highlight active links by url
  (function(){
    try{
      const nav = document.querySelectorAll('.nav a');
      nav.forEach(a=>{
        if(window.location.pathname.startsWith(a.getAttribute('href'))){ a.classList.add('active') }
      })
    }catch(e){/* ignore */}
  })();
</script>


